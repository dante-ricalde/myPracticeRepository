<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:int="http://www.springframework.org/schema/integration" xmlns:int-jdbc="http://www.springframework.org/schema/integration/jdbc" xmlns:int-stream="http://www.springframework.org/schema/integration/stream"
	xmlns:int-jmx="http://www.springframework.org/schema/integration/jmx" xmlns:int-file="http://www.springframework.org/schema/integration/file" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
	xmlns:task="http://www.springframework.org/schema/task" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:int-script="http://www.springframework.org/schema/integration/scripting" xmlns:int-groovy="http://www.springframework.org/schema/integration/groovy" xmlns:int-http="http://www.springframework.org/schema/integration/http"
	xmlns:int-ftp="http://www.springframework.org/schema/integration/ftp" xmlns:int-amqp="http://www.springframework.org/schema/integration/amqp" xmlns:rabbit="http://www.springframework.org/schema/rabbit"
	xmlns:int-event="http://www.springframework.org/schema/integration/event" xmlns:int-feed="http://www.springframework.org/schema/integration/feed" xmlns:gfe="http://www.springframework.org/schema/gemfire"
	xmlns:int-gfe="http://www.springframework.org/schema/integration/gemfire" xmlns:gfe-data="http://www.springframework.org/schema/data/gemfire" xmlns:int-ip="http://www.springframework.org/schema/integration/ip"
	xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd
		http://www.springframework.org/schema/integration/groovy http://www.springframework.org/schema/integration/groovy/spring-integration-groovy-2.2.xsd
		http://www.springframework.org/schema/integration/jdbc http://www.springframework.org/schema/integration/jdbc/spring-integration-jdbc-2.2.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/integration/scripting http://www.springframework.org/schema/integration/scripting/spring-integration-scripting-2.1.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http-2.2.xsd
		http://www.springframework.org/schema/integration/ftp http://www.springframework.org/schema/integration/ftp/spring-integration-ftp-2.2.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.2.xsd
		http://www.springframework.org/schema/integration/file http://www.springframework.org/schema/integration/file/spring-integration-file-2.2.xsd
		http://www.springframework.org/schema/integration/jmx http://www.springframework.org/schema/integration/jmx/spring-integration-jmx-2.2.xsd
		http://www.springframework.org/schema/integration/stream http://www.springframework.org/schema/integration/stream/spring-integration-stream-2.2.xsd
		http://www.springframework.org/schema/integration/amqp http://www.springframework.org/schema/integration/amqp/spring-integration-amqp-2.2.xsd
		http://www.springframework.org/schema/integration/event http://www.springframework.org/schema/integration/event/spring-integration-event-2.2.xsd
		http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit-1.1.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/integration/feed http://www.springframework.org/schema/integration/feed/spring-integration-feed-2.2.xsd
		http://www.springframework.org/schema/gemfire http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
		http://www.springframework.org/schema/integration/gemfire http://www.springframework.org/schema/integration/gemfire/spring-integration-gemfire-2.2.xsd
		http://www.springframework.org/schema/data/gemfire http://www.springframework.org/schema/data/gemfire/spring-data-gemfire.xsd
		http://www.springframework.org/schema/integration/ip http://www.springframework.org/schema/integration/ip/spring-integration-ip-2.2.xsd">

	<!-- In this case I am testing the SSL/TLS Support in <int-ip:tcp-outbound-gateway> and <int-ip:tcp-inbound-gateway> tcp gateways. I have set in each TLS peer (in client (<int-ip:tcp-outbound-gateway>) 
		and server (<int-ip:tcp-inbound-gateway>)) two keystores; a keystore containing private/public key pairs identifying the peer; a truststore containing the public keys for peers that 
		are trusted. Besides I have added a listener that gets notified after SSL handshaking is complete (I just print the following message: "THE HANDSHAKE IS COMPLETED" and I hadn't to use NIO because 
		I didn't find the way how to add a listener using the SSLEngine feature (this is used with NIO), I only could add the listener without NIO using SSLSocket) and set the property 
		"apply-sequence" to true on client and server tcp connection factories and I saw that messages arriving on a TCP connection have sequenceNumber and correlatioId headers set although 
		I couldn't use a resequencer downstream of the inbound endpoint to return the messages to their proper sequence using those headers and that's because the messages are so small and 
		the buffer size used for the transfer (for sending and receiving) is bigger that the size of the messages and for that reason the messages always have sequenceNumber=1 (I think that if I would have to order
		the messages using a resequencer (because there are several messages with the same correlationId and consecutive sequence number for each correlationId) then I would need to aggregate those messages and make up 
		the resulting message of all the parts received by correlationId (where each part is a message received by the inbound endpoint using a consecutive sequence number with the same correlation id)).
		
		Regarding threads we have:
		
		1.) <int:inbound-channel-adapter -> sslTcpOutboundGatewayRequestChannel -> <int-ip:tcp-outbound-gateway -> host -> sslTcpOutboundGatewayReplyChannel (<int-ip:tcp-outbound-gateway) -> <int:outbound-channel-adapter
		
		2.) (host) <int-ip:tcp-inbound-gateway -> sslTcpInboundGatewayRequestChannel -> <int:service-activator -> sslTcpInboundGatewayReplyChannel -> client (<int-ip:tcp-inbound-gateway)
		
		You need to take into account that after the <int-ip:tcp-outbound-gateway sends the message to the host over the connection waits for a response (it uses the 
		property "remote-timeout") and constructs a response message and puts in on the reply channel. 
		
		In The logs you can see the completed path of two messages since they are generated in the <int:inbound-channel-adapter:
		
			DEBUG [org.springframework.integration.endpoint.SourcePollingChannelAdapter]  - Poll resulted in Message: [Payload=Dantito Ricalde Rivera][Headers={timestamp=1385549910309, id=787bf75b-b45a-4965-b235-6d6bbbd961e2, anotherPaymentType=DEBIT}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpOutboundGatewayRequestChannel', message: [Payload=Dantito Ricalde Rivera][Headers={timestamp=1385549910311, id=4a9416dc-fec8-4cdd-8ef0-8b5278da8f08, anotherPaymentType=DEBIT, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - org.springframework.integration.ip.tcp.TcpOutboundGateway#0 received message: [Payload=Dantito Ricalde Rivera][Headers={timestamp=1385549910311, id=4a9416dc-fec8-4cdd-8ef0-8b5278da8f08, anotherPaymentType=DEBIT, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetClientConnectionFactory]  - Opening new socket connection to localhost:12345
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioServerConnectionFactory]  - New accept
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - New connection localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - Added localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Reading...
			DEBUG [org.springframework.integration.ip.tcp.serializer.ByteArrayCrLfSerializer]  - Available to read:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - New connection 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 Reading...
			DEBUG [org.springframework.integration.ip.tcp.serializer.ByteArrayCrLfSerializer]  - Available to read:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 200 into raw buffer
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NOT_HANDSHAKING, remaining:200
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 200 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 200 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 0 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = BUFFER_OVERFLOW HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = BUFFER_OVERFLOW HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 86
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 writing 86
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 86, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 6
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 writing 6
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 6, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 writing 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53, remaining:61440
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 Reading...
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 6 into raw buffer
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NEED_UNWRAP, remaining:6
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 6 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Message sent [Payload=Dantito Ricalde Rivera][Headers={timestamp=1385549910312, id=a8d839fe-cdbe-436c-b7a3-0a2da9e8cea4, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway, anotherPaymentType=DEBIT}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 6 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 6 bytesProduced = 0, remaining:61440
			DEBUG [spring.integration.test.tcp.ssl.MyCustomHandshakeCompletedListener]  - ******************* THE HANDSHAKE IS COMPLETED *************************
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 Reading...
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 180 into raw buffer
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NEED_UNWRAP, remaining:180
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = FINISHED bytesConsumed = 53 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = FINISHED bytesConsumed = 53 bytesProduced = 0, remaining:127
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 53 bytesProduced = 22
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 53 bytesProduced = 22, remaining:74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:37
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:61440
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpInboundGatewayRequestChannel', message: [Payload=[B@40471d1f][Headers={timestamp=1385549910359, id=41235f4f-6d12-4f49-a5f4-13492d93dfa7, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.ServiceActivatingHandler]  - ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@32e6cb4d] received message: [Payload=[B@40471d1f][Headers={timestamp=1385549910359, id=41235f4f-6d12-4f49-a5f4-13492d93dfa7, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			INFO  [spring.integration.test.handler.ServiceActivatorCustomizable]  - *************** Received Message for service activator. Mensaje: Dantito Ricalde Rivera
			DEBUG [org.springframework.integration.handler.ServiceActivatingHandler]  - handler 'ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@32e6cb4d]' sending reply Message: [Payload=[B@40471d1f][Headers={timestamp=1385549910362, id=62f3e9bd-dedb-4156-a171-b38df2cb2373, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator, ip_tcp_remotePort=64282, ip_address=127.0.0.1, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpInboundGatewayReplyChannel', message: [Payload=[B@40471d1f][Headers={timestamp=1385549910365, id=d350df02-615f-454e-a077-1dc70ccd5a49, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.BridgeHandler]  - org.springframework.integration.handler.BridgeHandler@10e5c1f7 received message: [Payload=[B@40471d1f][Headers={timestamp=1385549910365, id=d350df02-615f-454e-a077-1dc70ccd5a49, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.BridgeHandler]  - handler 'org.springframework.integration.handler.BridgeHandler@10e5c1f7' sending reply Message: [Payload=[B@40471d1f][Headers={timestamp=1385549910365, id=d350df02-615f-454e-a077-1dc70ccd5a49, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpInboundGatewayReplyChannel', message: [Payload=[B@40471d1f][Headers={timestamp=1385549910365, id=d350df02-615f-454e-a077-1dc70ccd5a49, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpInboundGatewayRequestChannel', message: [Payload=[B@40471d1f][Headers={timestamp=1385549910359, id=41235f4f-6d12-4f49-a5f4-13492d93dfa7, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_address=127.0.0.1, ip_tcp_remotePort=64282, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@7cc8ff30, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 22 bytesProduced = 53 Plaintext buffer @22/22
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - doWrite: Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 22 bytesProduced = 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 writing 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 2 bytesProduced = 74 Plaintext buffer @2/2
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - doWrite: Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 2 bytesProduced = 74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4 writing 74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Message sent [Payload=[B@40471d1f][Headers={timestamp=1385549910379, id=a23fa990-0235-42e5-8cb9-87e54d685df0, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, ip_tcp_remotePort=64282, ip_address=127.0.0.1, correlationId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Closing single-use connection127.0.0.1:64282:92a95938-9b34-43f4-9196-af55b2f59ca4
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Message received [Payload=[B@68f2c791][Headers={timestamp=1385549910385, id=68a19a41-4199-483d-a1e1-93942078caf5, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Closing single use socket after inbound message localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - Respose [Payload=[B@68f2c791][Headers={timestamp=1385549910385, id=68a19a41-4199-483d-a1e1-93942078caf5, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioServerConnectionFactory]  - Removing closed channel
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - handler 'org.springframework.integration.ip.tcp.TcpOutboundGateway#0' sending reply Message: [Payload=[B@68f2c791][Headers={timestamp=1385549910388, id=7c46976c-bb61-4c69-a179-0eb275de3e18, anotherPaymentType=DEBIT, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway, ip_address=127.0.0.1, ip_tcp_remotePort=12345, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpOutboundGatewayReplyChannel', message: [Payload=[B@68f2c791][Headers={timestamp=1385549910389, id=4706273e-7ece-4605-840b-3b602779832e, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=DEBIT, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.MethodInvokingMessageHandler]  - org.springframework.integration.handler.MethodInvokingMessageHandler#28 received message: [Payload=[B@68f2c791][Headers={timestamp=1385549910389, id=4706273e-7ece-4605-840b-3b602779832e, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=DEBIT, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			INFO  [spring.integration.test.adapter.receiver.ChannelAdapterReceiver]  - Channel Adapter Receiver: Message Received: [Payload=[B@68f2c791][Headers={timestamp=1385549910389, id=6c5a0b6b-147d-4d18-987b-3ce86d0d8b0e, anotherPaymentType=DEBIT, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel,simpleTcpOutboundGatewayOutboundChannelAdapter, ip_address=127.0.0.1, ip_tcp_remotePort=12345, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]*********END OF THE MESSAGE *************************
			INFO  [spring.integration.test.adapter.receiver.ChannelAdapterReceiver]  - Channel Adapter Receiver: Payload array of bytes to String: Dantito Ricalde Rivera
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpOutboundGatewayReplyChannel', message: [Payload=[B@68f2c791][Headers={timestamp=1385549910389, id=4706273e-7ece-4605-840b-3b602779832e, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=DEBIT, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, ip_hostname=localhost, ip_connectionId=localhost:12345:a7cc8cce-136f-4f67-bf35-b9e19bfae1f7, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpOutboundGatewayRequestChannel', message: [Payload=Dantito Ricalde Rivera][Headers={timestamp=1385549910311, id=4a9416dc-fec8-4cdd-8ef0-8b5278da8f08, anotherPaymentType=DEBIT, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
			
			
			
			
			DEBUG [org.springframework.integration.endpoint.SourcePollingChannelAdapter]  - Poll resulted in Message: [Payload=Danielito Ricalde Rivera][Headers={timestamp=1385549920309, id=ce705b02-f6e6-4fd9-ac28-d384ce250910, anotherPaymentType=PERSONAL CHECK}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpOutboundGatewayRequestChannel', message: [Payload=Danielito Ricalde Rivera][Headers={timestamp=1385549920310, id=bfb42075-b70b-4275-b6c9-33bb19915e98, anotherPaymentType=PERSONAL CHECK, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - org.springframework.integration.ip.tcp.TcpOutboundGateway#0 received message: [Payload=Danielito Ricalde Rivera][Headers={timestamp=1385549920310, id=bfb42075-b70b-4275-b6c9-33bb19915e98, anotherPaymentType=PERSONAL CHECK, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetClientConnectionFactory]  - Opening new socket connection to localhost:12345
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - New connection localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - Added localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Reading...
			DEBUG [org.springframework.integration.ip.tcp.serializer.ByteArrayCrLfSerializer]  - Available to read:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioServerConnectionFactory]  - New accept
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - New connection 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 Reading...
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 200 into raw buffer
			DEBUG [org.springframework.integration.ip.tcp.serializer.ByteArrayCrLfSerializer]  - Available to read:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NOT_HANDSHAKING, remaining:200
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 200 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 200 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_TASK bytesConsumed = 0 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = BUFFER_OVERFLOW HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = BUFFER_OVERFLOW HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 86
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 writing 86
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 86, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 6
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 writing 6
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_WRAP bytesConsumed = 0 bytesProduced = 6, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 writing 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 0 bytesProduced = 53, remaining:61440
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 Reading...
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 59 into raw buffer
			DEBUG [spring.integration.test.tcp.ssl.MyCustomHandshakeCompletedListener]  - ******************* THE HANDSHAKE IS COMPLETED *************************
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Message sent [Payload=Danielito Ricalde Rivera][Headers={timestamp=1385549920311, id=5365fb27-a67a-46f7-933b-138348b0518c, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway, anotherPaymentType=PERSONAL CHECK}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NEED_UNWRAP, remaining:59
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 6 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NEED_UNWRAP bytesConsumed = 6 bytesProduced = 0, remaining:53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = FINISHED bytesConsumed = 53 bytesProduced = 0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = FINISHED bytesConsumed = 53 bytesProduced = 0, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = FINISHED bytesConsumed = 53 bytesProduced = 0, remaining:61440
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 Reading...
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Read 127 into raw buffer
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe NOT_HANDSHAKING, remaining:127
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 53 bytesProduced = 24
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 53 bytesProduced = 24, remaining:74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:37
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After unwrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - result Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:0
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - sendToPipe.x Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 37 bytesProduced = 1, remaining:61440
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpInboundGatewayRequestChannel', message: [Payload=[B@b454785][Headers={timestamp=1385549920353, id=574ccad6-b467-4092-b34b-3d671e805aa5, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.ServiceActivatingHandler]  - ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@32e6cb4d] received message: [Payload=[B@b454785][Headers={timestamp=1385549920353, id=574ccad6-b467-4092-b34b-3d671e805aa5, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			INFO  [spring.integration.test.handler.ServiceActivatorCustomizable]  - *************** Received Message for service activator. Mensaje: Danielito Ricalde Rivera
			DEBUG [org.springframework.integration.handler.ServiceActivatingHandler]  - handler 'ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@32e6cb4d]' sending reply Message: [Payload=[B@b454785][Headers={timestamp=1385549920354, id=c3694f0b-07db-4e8b-86d5-283ac6e272e3, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator, ip_tcp_remotePort=64284, ip_address=127.0.0.1, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpInboundGatewayReplyChannel', message: [Payload=[B@b454785][Headers={timestamp=1385549920355, id=c3a2b82a-4d4d-4b84-8b8e-0fc56ad0ff3d, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.BridgeHandler]  - org.springframework.integration.handler.BridgeHandler@10e5c1f7 received message: [Payload=[B@b454785][Headers={timestamp=1385549920355, id=c3a2b82a-4d4d-4b84-8b8e-0fc56ad0ff3d, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.BridgeHandler]  - handler 'org.springframework.integration.handler.BridgeHandler@10e5c1f7' sending reply Message: [Payload=[B@b454785][Headers={timestamp=1385549920355, id=c3a2b82a-4d4d-4b84-8b8e-0fc56ad0ff3d, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpInboundGatewayReplyChannel', message: [Payload=[B@b454785][Headers={timestamp=1385549920355, id=c3a2b82a-4d4d-4b84-8b8e-0fc56ad0ff3d, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpInboundGatewayRequestChannel', message: [Payload=[B@b454785][Headers={timestamp=1385549920353, id=574ccad6-b467-4092-b34b-3d671e805aa5, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel, errorChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_address=127.0.0.1, ip_tcp_remotePort=64284, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, replyChannel=org.springframework.integration.core.MessagingTemplate$TemporaryReplyChannel@715a728a, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 24 bytesProduced = 53 Plaintext buffer @24/24
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - doWrite: Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 24 bytesProduced = 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 writing 53
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - After wrap:Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 2 bytesProduced = 74 Plaintext buffer @2/2
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - doWrite: Status = OK HandshakeStatus = NOT_HANDSHAKING bytesConsumed = 2 bytesProduced = 74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - 127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400 writing 74
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Message sent [Payload=[B@b454785][Headers={timestamp=1385549920357, id=1a8088ad-87cd-4b8b-a706-bfe820974dfb, history=sslTcpInboundGateway,sslTcpInboundGatewayRequestChannel,sslTcpInboundGatewayServiceActivator,sslTcpInboundGatewayReplyChannel, ip_tcp_remotePort=64284, ip_address=127.0.0.1, correlationId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, ip_hostname=127.0.0.1, ip_connectionId=127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioSSLConnection]  - Closing single-use connection127.0.0.1:64284:43a37cb6-ce90-4b25-9129-5c974b911400
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Message received [Payload=[B@225e1da5][Headers={timestamp=1385549920359, id=1b9af2f6-23e3-480f-aac7-ec4efb872ca2, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNetConnection]  - Closing single use socket after inbound message localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - Respose [Payload=[B@225e1da5][Headers={timestamp=1385549920359, id=1b9af2f6-23e3-480f-aac7-ec4efb872ca2, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.ip.tcp.TcpOutboundGateway]  - handler 'org.springframework.integration.ip.tcp.TcpOutboundGateway#0' sending reply Message: [Payload=[B@225e1da5][Headers={timestamp=1385549920361, id=c66f7ed0-be8c-481d-b226-b2e7ad9f85f7, anotherPaymentType=PERSONAL CHECK, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway, ip_address=127.0.0.1, ip_tcp_remotePort=12345, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - preSend on channel 'sslTcpOutboundGatewayReplyChannel', message: [Payload=[B@225e1da5][Headers={timestamp=1385549920361, id=019bdd50-35f3-4b8d-9984-72951e1fd9d5, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=PERSONAL CHECK, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.handler.MethodInvokingMessageHandler]  - org.springframework.integration.handler.MethodInvokingMessageHandler#28 received message: [Payload=[B@225e1da5][Headers={timestamp=1385549920361, id=019bdd50-35f3-4b8d-9984-72951e1fd9d5, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=PERSONAL CHECK, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			INFO  [spring.integration.test.adapter.receiver.ChannelAdapterReceiver]  - Channel Adapter Receiver: Message Received: [Payload=[B@225e1da5][Headers={timestamp=1385549920361, id=5bc8a809-4e3b-4ab9-b823-9a7207b64244, anotherPaymentType=PERSONAL CHECK, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel,simpleTcpOutboundGatewayOutboundChannelAdapter, ip_address=127.0.0.1, ip_tcp_remotePort=12345, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]*********END OF THE MESSAGE *************************
			INFO  [spring.integration.test.adapter.receiver.ChannelAdapterReceiver]  - Channel Adapter Receiver: Payload array of bytes to String: Danielito Ricalde Rivera
			DEBUG [org.springframework.integration.ip.tcp.connection.TcpNioServerConnectionFactory]  - Removing closed channel
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpOutboundGatewayReplyChannel', message: [Payload=[B@225e1da5][Headers={timestamp=1385549920361, id=019bdd50-35f3-4b8d-9984-72951e1fd9d5, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel,sslTcpOutboundGateway,sslTcpOutboundGatewayReplyChannel, anotherPaymentType=PERSONAL CHECK, ip_tcp_remotePort=12345, ip_address=127.0.0.1, correlationId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, ip_hostname=localhost, ip_connectionId=localhost:12345:fd903cce-073f-4f59-b398-cd3ca267eda4, sequenceNumber=1}]
			DEBUG [org.springframework.integration.channel.DirectChannel]  - postSend (sent=true) on channel 'sslTcpOutboundGatewayRequestChannel', message: [Payload=Danielito Ricalde Rivera][Headers={timestamp=1385549920310, id=bfb42075-b70b-4275-b6c9-33bb19915e98, anotherPaymentType=PERSONAL CHECK, history=sslTcpOutboundGatewayInboundChannelAdapter,sslTcpOutboundGatewayRequestChannel}]
		
		 -->

	<bean id="sslContextSupport" class="org.springframework.integration.ip.tcp.connection.support.DefaultTcpSSLContextSupport">
		<constructor-arg value="certificate/sslServer.ks" />
		<constructor-arg value="certificate/sslServer.trustStore.ks" />
		<constructor-arg value="sslSecret" />
		<constructor-arg value="sslTrustSecret" />
	</bean>

	<int-ip:tcp-connection-factory id="sslServerTcpConnectionFactory" type="server" port="12345" using-nio="true" single-use="true" ssl-context-support="sslContextSupport"
		apply-sequence="true" />

	<int:channel id="sslTcpInboundGatewayRequestChannel" />

	<int:channel id="sslTcpInboundGatewayReplyChannel" />

	<int-ip:tcp-inbound-gateway id="sslTcpInboundGateway" request-channel="sslTcpInboundGatewayRequestChannel" connection-factory="sslServerTcpConnectionFactory"
		reply-channel="sslTcpInboundGatewayReplyChannel" auto-startup="true" />

	<int:service-activator id="sslTcpInboundGatewayServiceActivator" ref="serviceActivatorCustomizable" input-channel="sslTcpInboundGatewayRequestChannel"
		output-channel="sslTcpInboundGatewayReplyChannel" auto-startup="true" />



	<int:inbound-channel-adapter id="sslTcpOutboundGatewayInboundChannelAdapter"
		expression="T(java.lang.Math).random() > 0.5 ? T(org.springframework.integration.support.MessageBuilder).withPayload('Dantito Ricalde Rivera').setHeader('anotherPaymentType', 'DEBIT').build(): 
    		T(org.springframework.integration.support.MessageBuilder).withPayload('Danielito Ricalde Rivera').setHeader('anotherPaymentType', 'PERSONAL CHECK').build()"
		channel="sslTcpOutboundGatewayRequestChannel" auto-startup="true">
		<int:poller fixed-rate="10000" />
	</int:inbound-channel-adapter>

	<bean id="sslClientContextSupport" class="org.springframework.integration.ip.tcp.connection.support.DefaultTcpSSLContextSupport">
		<constructor-arg value="certificate/sslClient.ks" />
		<constructor-arg value="certificate/sslClient.trustStore.ks" />
		<constructor-arg value="sslClientSecret" />
		<constructor-arg value="sslClientTrustSecret" />
	</bean>

	<int-ip:tcp-connection-factory id="sslClientFactory" type="client" host="localhost" port="12345" using-nio="false" single-use="true"
		ssl-context-support="sslClientContextSupport" socket-support="myCustomTcpSocketSupport" apply-sequence="true" />

	<int:channel id="sslTcpOutboundGatewayRequestChannel" />

	<int:channel id="sslTcpOutboundGatewayReplyChannel" />

	<int-ip:tcp-outbound-gateway id="sslTcpOutboundGateway" request-channel="sslTcpOutboundGatewayRequestChannel" reply-channel="sslTcpOutboundGatewayReplyChannel"
		connection-factory="sslClientFactory" request-timeout="10000" remote-timeout="10000" auto-startup="true" />

	<int:outbound-channel-adapter id="simpleTcpOutboundGatewayOutboundChannelAdapter" channel="sslTcpOutboundGatewayReplyChannel" ref="channelAdapterReceiver"
		method="receiveMessage" auto-startup="true" />

</beans>